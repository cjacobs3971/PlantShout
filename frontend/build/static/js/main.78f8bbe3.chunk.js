(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var s=a(0),o=a.n(s),c=a(19),n=a(6),r=a(2),i=a(5),l=a.n(i),d=a(3);var p=()=>{const[e,t]=Object(s.useState)(!0),a=Object(r.p)();return Object(d.jsx)("div",{className:"login-register",children:Object(d.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const s=t.target.email.value,o=t.target.password.value,c="https://plantshout-199a76bab95e.herokuapp.com";if(e)try{const e=await l.a.post("".concat(c,"/api/login"),{email:s,password:o});200===e.status?(localStorage.setItem("token",e.data.token),localStorage.setItem("user_id",e.data.user_id),a("/main")):alert(e.data.message)}catch(n){console.error("Error logging in:",n),alert("Failed to login")}else try{const e=await l.a.post("".concat(c,"/api/register"),{email:s,password:o});if(201===e.status){const e=await l.a.post("".concat(c,"/api/login"),{email:s,password:o});200===e.status&&(localStorage.setItem("token",e.data.token),localStorage.setItem("user_id",e.data.user_id),a("/main"))}else alert(e.data.message)}catch(n){console.error("Error registering:",n.response?n.response.data:n),alert("Failed to register")}},children:[Object(d.jsx)("h2",{children:e?"Login":"Register"}),Object(d.jsx)("input",{type:"email",name:"email",placeholder:"Email",required:!0}),Object(d.jsx)("input",{type:"password",name:"password",placeholder:"Password",required:!0}),!e&&Object(d.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",required:!0}),Object(d.jsx)("button",{type:"submit",children:e?"Login":"Register"}),Object(d.jsx)("p",{onClick:()=>t(!e),children:e?"Don't have an account? Register":"Already have an account? Login"})]})})},j=a.p+"static/media/AphidAI.fb7d1a23.png";var u=()=>{const[e,t]=Object(s.useState)([]),[a,o]=Object(s.useState)(""),[c,n]=Object(s.useState)(""),[i,p]=Object(s.useState)(""),[u,h]=Object(s.useState)(""),[m,b]=Object(s.useState)(null),[g,O]=Object(s.useState)(""),[x,v]=Object(s.useState)(null),f=Object(r.p)(),y="https://plantshout-199a76bab95e.herokuapp.com";Object(s.useEffect)((()=>{l.a.get("".concat(y,"/api/posts")).then((e=>t(e.data))).catch((e=>console.error("Error fetching posts:",e)))}),[]);return Object(d.jsxs)("div",{className:"main-page",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:"Welcome to Plant Shout"}),Object(d.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),f("/login")},children:"Logout"})]}),Object(d.jsxs)("div",{className:"info",children:[Object(d.jsx)("h2",{children:"Home of the plant help, this is an anonymous help page for plant enthusiasts where you can get help instantly through the power of AI as well as help from other people around the world."}),Object(d.jsx)("h2",{children:"Sometimes we need an immediate response, we get it, just select the question category and fill in the areas. Once youve hit submit post youll get an instant comment from an AI trying to help. if you dont need an immediate response, dont like the idea of using an AI, or just want to start a discussion with other people then select the discussion category and continue just like last time."})]}),Object(d.jsxs)("div",{className:"post-form",children:[Object(d.jsx)("h2",{children:"Create Post"}),Object(d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=new FormData;s.append("category",a),s.append("tags",c),s.append("title",i),s.append("text",u),s.append("user_id",localStorage.getItem("user_id")),m&&s.append("image",m);const r=localStorage.getItem("token"),d={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r)}};try{await l.a.post("".concat(y,"/api/posts"),s,d),o(""),n(""),p(""),h(""),b(null),l.a.get("".concat(y,"/api/posts")).then((e=>t(e.data)))}catch(j){console.error("Error creating post:",j)}},children:[Object(d.jsxs)("select",{value:a,onChange:e=>o(e.target.value),required:!0,children:[Object(d.jsx)("option",{value:"",children:"Select Category"}),Object(d.jsx)("option",{value:"question",children:"Question"}),Object(d.jsx)("option",{value:"discussion",children:"Discussion"})]}),Object(d.jsx)("input",{type:"text",placeholder:"Tags",value:c,onChange:e=>n(e.target.value),required:!0}),Object(d.jsx)("input",{type:"text",placeholder:"Title",value:i,onChange:e=>p(e.target.value),required:!0}),Object(d.jsx)("textarea",{placeholder:"Text Here",value:u,onChange:e=>h(e.target.value),required:!0}),Object(d.jsx)("button",{type:"submit",children:"Submit Post"})]})]}),Object(d.jsx)("div",{className:"feed",children:e.map((e=>Object(d.jsxs)("div",{className:"post",children:[Object(d.jsx)("h2",{children:e.title}),Object(d.jsx)("h3",{children:e.text}),Object(d.jsxs)("form",{onSubmit:a=>(async(e,a)=>{e.preventDefault();const s=localStorage.getItem("token"),o=localStorage.getItem("user_id"),c={headers:{Authorization:"Bearer ".concat(s)}};try{await l.a.post("".concat(y,"/api/comments"),{text:g,post_id:a,user_id:o},c),O(""),v(null),l.a.get("".concat(y,"/api/posts")).then((e=>t(e.data)))}catch(n){console.error("error adding comment: ",n)}})(a,e.id),children:[Object(d.jsx)("textarea",{placeholder:"Write a comment here",value:x===e.id?g:"",onChange:t=>{v(e.id),O(t.target.value)},required:!0}),Object(d.jsx)("button",{type:"submit",children:"Post Comment"})]}),Object(d.jsxs)("div",{className:"comments",children:[e.comments&&e.comments.map((e=>Object(d.jsxs)("div",{className:"comment",children:[Object(d.jsx)("div",{className:"user_picture",children:Object(d.jsx)("img",{src:"http://127.0.0.1:5000/profile_pics/".concat(e.user_profile_pic),alt:"Profile"})}),Object(d.jsx)("p",{children:e.text})]},e.id))),Object(d.jsxs)("div",{className:"comment",children:[Object(d.jsx)("div",{clssName:"AI_picture",children:Object(d.jsx)("img",{src:j,alt:"AphidAI"})}),Object(d.jsx)("p",{children:e.ai_response})]})]})]},e.id)))})]})};var h=()=>Object(d.jsx)(n.a,{children:Object(d.jsxs)(r.d,{children:[Object(d.jsx)(r.b,{path:"/login",element:Object(d.jsx)(p,{})}),Object(d.jsx)(r.b,{path:"/main",element:null!==localStorage.getItem("token")?Object(d.jsx)(u,{}):Object(d.jsx)(r.a,{to:"/login"})}),Object(d.jsx)(r.b,{path:"/",element:Object(d.jsx)(r.a,{to:"/login"})})]})});a(45);const m=document.getElementById("root");Object(c.createRoot)(m).render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(h,{})}))}},[[46,1,2]]]);
//# sourceMappingURL=main.78f8bbe3.chunk.js.map